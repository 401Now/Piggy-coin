function flipPig() {
    const coin = document.getElementById('pig-coin');
    const flipBtn = document.getElementById('flipBtn');
    const totalDebtEl = document.getElementById('total-debt');
    const msg = document.getElementById('msg');
    
    flipBtn.disabled = true;
    coin.style.transform = "rotateY(1440deg)"; 

    setTimeout(() => {
        // --- BIASED PROBABILITY LOGIC ---
        // Math.random() generates a number between 0 and 1.
        // If it's 0.58 or higher (42% chance), you get Heads (Safe).
        // If it's less than 0.58 (58% chance), you get Tails (Pay).
        const isTails = Math.random() < 0.58; 
        
        coin.style.transform = "rotateY(0deg)";
        
        if (!isTails) { // Heads / Safe
            coin.innerText = "ðŸ·";
            msg.innerText = "SAFE! The pig showed mercy.";
        } else { // Tails / Pay
            coin.innerText = "ðŸ‘";
            totalDebt += currentAmount;
            totalDebtEl.innerText = "$" + totalDebt;
            msg.innerText = "Ouch! You owe $" + currentAmount;
            addToHistory(currentAmount);
        }
        
        updatePaymentLinks();
        flipBtn.style.display = "none";
        flipBtn.disabled = false;
    }, 600);
}
